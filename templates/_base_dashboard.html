{% load static %}
<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Dashboard - Gagasan{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body { font-family: "Inter", sans-serif; }
      ::-webkit-scrollbar { width: 6px; height: 6px; }
      ::-webkit-scrollbar-track { background: #f1f1f1; }
      ::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 3px; }
      ::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
      .assessment-radio + label { display: inline-block; cursor: pointer; padding: 0.5rem 1rem; border: 1px solid #d1d5db; border-radius: 0.375rem; margin-right: 0.5rem; transition: all 0.2s ease-in-out; font-size: 0.875rem; background-color: #f9fafb; }
      .assessment-radio:hover + label { background-color: #f3f4f6; border-color: #9ca3af; }
      .assessment-radio:checked + label { background-color: #EDE9FE; border-color: #A78BFA; color: #5B21B6; font-weight: 600; box-shadow: 0 0 0 1px #A78BFA; }
      .assessment-radio { display: none; }

      .modal-vjs { display: none; opacity: 0; transition: opacity 0.3s ease-out; }
      .modal-vjs.flex { display: flex; opacity: 1; }
      .modal-box-vjs { transform: scale(0.95); opacity: 0; transition: transform 0.3s ease-out, opacity 0.3s ease-out; }
      .modal-vjs.flex .modal-box-vjs { transform: scale(1); opacity: 1; }
    </style>
    {% block extra_head %}{% endblock %}
  </head>
  <body class="bg-gray-50 flex">
    <aside
      class="w-72 bg-gradient-to-b from-purple-700 to-blue-700 text-white flex flex-col fixed h-screen shadow-lg z-20"
    >
        <div class="p-6 flex items-center gap-3 border-b border-white/20">
        <img src="{% static 'images/LOGO GAGASAN.png' %}" alt="Logo Gagasan" class="h-10 w-10 rounded-lg bg-white/30 p-1"/>
        <div>
          <h1 class="font-bold text-lg">GAGASAN</h1>
          <p class="text-xs font-light text-white/80">Dari Gagasan Jadi Inovasi</p>
        </div>
      </div>
      <div class="p-6 flex items-center gap-3">
        <div class="w-10 h-10 bg-purple-400 rounded-full flex items-center justify-center ring-2 ring-white/50"><i class="fas fa-user"></i></div>
        <div>
          <h2 class="font-semibold">{{ request.user.first_name|default:request.user.username }}</h2>
          <span class="px-2 py-0.5 bg-white/30 text-xs rounded-full font-medium">{{ request.user.get_peran_display }}</span>
        </div>
      </div>
      <nav class="flex-1 px-4 py-2 space-y-1.5 overflow-y-auto">
        
        {% if request.user.peran == 'unit_bisnis' %}
        <a href="{% url 'repository' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'repository' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-book-open w-5 text-center"></i><span>Repository</span></a>
        <a href="{% url 'catalog' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'catalog' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-store w-5 text-center"></i><span>Catalog</span></a>
        <a href="{% url 'dashboard_unit_bisnis' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'dashboard_unit_bisnis' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-tachometer-alt w-5 text-center"></i><span>Dashboard</span></a>
        <a href="{% url 'profile' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'profile' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-user-circle w-5 text-center"></i><span>Profile</span></a>
        <p class="px-4 pt-4 pb-2 text-xs font-medium text-white/50 uppercase">Administrasi</p>
        <a href="{% url 'manage_users' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'manage_users' or request.resolver_match.url_name == 'approve_user' or request.resolver_match.url_name == 'toggle_active_user' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-users-cog w-5 text-center"></i><span>User Management & Monitoring</span></a>
        <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors"><i class="fas fa-file-code w-5 text-center"></i><span>Source Code Requests</span></a>
        <p class="px-4 pt-4 pb-2 text-xs font-medium text-white/50 uppercase">Alur Kerja Kurasi</p>
        <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors"><i class="fas fa-clipboard-list w-5 text-center"></i><span>Panduan Alur Kerja</span></a>
        <a href="{% url 'assign_curator_list' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'assign_curator_list' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-user-check w-5 text-center"></i><span>1. Penugasan Kurator</span></a>
        <a href="{% url 'monitoring_penilaian_list' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'monitoring_penilaian_list' or request.resolver_match.url_name == 'get_monitoring_details_json' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-chart-line w-5 text-center"></i><span>2. Monitoring Penilaian</span></a>
        <a href="{% url 'review_decision_list' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'review_decision_list' or request.resolver_match.url_name == 'get_review_details_json' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-gavel w-5 text-center"></i><span>3. Review & Keputusan</span></a>
        <a href="{% url 'publish_catalog_list' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'publish_catalog_list' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-upload w-5 text-center"></i><span>4. Publikasi Katalog</span></a>
        <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors"><i class="fas fa-info-circle w-5 text-center"></i><span>Info Sistem Kurasi</span></a>

        {% elif request.user.peran == 'mahasiswa' %}
        <a href="{% url 'repository' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'repository' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-book-open w-5 text-center"></i><span>Repository</span></a>
         <a href="{% url 'catalog' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'catalog' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-store w-5 text-center"></i><span>Catalog</span></a>
         <a href="{% url 'dashboard_mahasiswa' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'dashboard_mahasiswa' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-home w-5 text-center"></i><span>Dashboard</span></a>
         <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'profile' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-user-circle w-5 text-center"></i><span>Profile</span></a>
         <a href="{% url 'dashboard_mahasiswa' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'my_projects' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-folder w-5 text-center"></i><span>My Projects</span></a>
         <a href="{% url 'access_requests' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'access_requests' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-key w-5 text-center"></i><span>Access Requests</span></a>
         <a href="{% url 'upload_project' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'upload_project' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-cloud-upload-alt w-5 text-center"></i><span>Upload Project</span></a>

        {% else %}
        <a href="{% url 'catalog' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'catalog' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-store w-5 text-center"></i><span>Catalog</span></a>
         {% if request.user.peran == 'dosen' %}
         <a href="{% url 'repository' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'repository' %}bg-white/20 font-semibold shadow-inner{% endif %}" > <i class="fas fa-book-open w-5 text-center"></i> <span>Repository</span> </a>
          <a href="{% url 'dashboard_dosen' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'dashboard_dosen' or request.resolver_match.url_name == 'assess_project' %}bg-white/20 font-semibold shadow-inner{% endif %}"> <i class="fas fa-tasks w-5 text-center"></i> <span>Tugas Penilaian</span></a>
          <a href="{% url 'upload_project' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'upload_project' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-cloud-upload-alt w-5 text-center"></i><span>Upload Project</span></a>
          <a href="{% url 'access_requests' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'access_requests' %}bg-white/20 font-semibold shadow-inner{% endif %}"><i class="fas fa-key w-5 text-center"></i><span>Access Requests</span></a>

          
         {% elif request.user.peran == 'mitra' %}
           <a href="{% url 'dashboard_mitra' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors {% if request.resolver_match.url_name == 'dashboard_mitra' or request.resolver_match.url_name == 'assess_project' %}bg-white/20 font-semibold shadow-inner{% endif %}"> <i class="fas fa-tasks w-5 text-center"></i> <span>Tugas Penilaian</span></a>{% endif %}
        <a href="#" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-white/10 transition-colors"><i class="fas fa-user-circle w-5 text-center"></i><span>Profile</span></a>{% endif %}
      </nav>
      <div class="p-4 border-t border-white/20">
        <a href="{% url 'logout' %}" class="flex items-center gap-3 px-4 py-2.5 rounded-lg text-white/90 hover:bg-red-500 hover:text-white transition-colors"><i class="fas fa-sign-out-alt w-5 text-center"></i><span>Logout</span></a>
      </div>
    </aside>

    <main class="ml-72 flex-1 overflow-y-auto">
      {% block dashboard_content %}
      <div class="p-8">
        <h1 class="text-2xl font-bold">Selamat Datang</h1>
        <p>Pilih menu dari sidebar untuk memulai.</p>
      </div>
      {% endblock %}
    </main>

     {% block extra_scripts %}{% endblock %}
  </body>
</html>